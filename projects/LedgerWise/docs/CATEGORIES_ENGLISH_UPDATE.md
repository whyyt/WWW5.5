# âœ… ç±»åˆ«è‹±æ–‡åŒ–æ›´æ–° - å·²å®Œæˆ

## ğŸ“‹ æ›´æ–°æ¦‚è¿°

å°†æ‰€æœ‰äº¤æ˜“ç±»åˆ«ä»ä¸­æ–‡æ”¹ä¸ºè‹±æ–‡ï¼Œä¿æŒç”¨æˆ·è¾“å…¥çš„æè¿°å¯ä»¥æ˜¯ä¸­æ–‡ï¼Œä½†ç³»ç»Ÿç±»åˆ«ç»Ÿä¸€ä½¿ç”¨è‹±æ–‡ã€‚

---

## ğŸ”„ ç±»åˆ«å¯¹ç…§è¡¨

### æ”¯å‡ºç±»åˆ« (Expense Categories)

| åŸä¸­æ–‡ç±»åˆ« | æ–°è‹±æ–‡ç±»åˆ« | è¯´æ˜ |
|:----------|:----------|:-----|
| é¤é¥® | Food | é¤é¥®æ¶ˆè´¹ |
| äº¤é€š | Transport | äº¤é€šå‡ºè¡Œ |
| è´­ç‰© | Shopping | è´­ç‰©æ¶ˆè´¹ |
| å¨±ä¹ | Entertainment | å¨±ä¹æ´»åŠ¨ |
| å…¶ä»– | ~~åˆ é™¤~~ | - |
| - | **Rent & Bills** | **æ–°å¢ï¼šæˆ¿ç§Ÿå’Œè´¦å•** |
| - | **Investments** | **æ–°å¢ï¼šæŠ•èµ„** |

### æ”¶å…¥ç±»åˆ« (Income Categories)

| åŸä¸­æ–‡ç±»åˆ« | æ–°è‹±æ–‡ç±»åˆ« | è¯´æ˜ |
|:----------|:----------|:-----|
| å·¥èµ„ | Salary | å·¥èµ„æ”¶å…¥ |
| è½¬è´¦ | Transfer | è½¬è´¦æ”¶å…¥ |
| å…¶ä»– | Other | å…¶ä»–æ”¶å…¥ |

---

## ğŸ“ ä¿®æ”¹æ–‡ä»¶æ¸…å•

### 1. `/lib/constants.ts` - ç±»åˆ«å®šä¹‰

**ä¿®æ”¹å†…å®¹**:
```typescript
// ä¿®æ”¹å‰
export const EXPENSE_CATEGORIES = [
  'é¤é¥®',
  'äº¤é€š',
  'è´­ç‰©',
  'å¨±ä¹',
  'å…¶ä»–'
] as const

export const INCOME_CATEGORIES = [
  'å·¥èµ„',
  'è½¬è´¦',
  'å…¶ä»–'
] as const

// ä¿®æ”¹å
export const EXPENSE_CATEGORIES = [
  'Rent & Bills',
  'Food',
  'Shopping',
  'Transport',
  'Entertainment',
  'Investments'
] as const

export const INCOME_CATEGORIES = [
  'Salary',
  'Transfer',
  'Other'
] as const
```

**å½±å“èŒƒå›´**:
- TypeScript ç±»å‹ç³»ç»Ÿè‡ªåŠ¨æ›´æ–°
- æ‰€æœ‰å¼•ç”¨ `ExpenseCategory` å’Œ `IncomeCategory` ç±»å‹çš„åœ°æ–¹è‡ªåŠ¨ç”Ÿæ•ˆ

---

### 2. `/utils/ai.ts` - AI æ–‡æœ¬è§£ææç¤ºè¯

**ä¿®æ”¹å†…å®¹**:
- æç¤ºè¯æ”¹ä¸ºè‹±æ–‡
- ç±»åˆ«åˆ—è¡¨æ›´æ–°ä¸ºè‹±æ–‡
- ç¤ºä¾‹æ›´æ–°ä¸ºè‹±æ–‡ç±»åˆ«è¾“å‡º

**å…³é”®å˜åŒ–**:
```typescript
// ä¿®æ”¹å‰
3. åˆ†ç±»(category)ï¼š
   - å¦‚æœæ˜¯æ”¯å‡ºï¼Œå¿…é¡»æ˜¯ï¼šé¤é¥®ã€äº¤é€šã€è´­ç‰©ã€å¨±ä¹ã€å…¶ä»–
   - å¦‚æœæ˜¯æ”¶å…¥ï¼Œå¿…é¡»æ˜¯ï¼šå·¥èµ„ã€è½¬è´¦ã€å…¶ä»–

// ä¿®æ”¹å
3. category:
   - For expenses, must be one of: Rent & Bills, Food, Shopping, Transport, Entertainment, Investments
   - For income, must be one of: Salary, Transfer, Other
```

**ç¤ºä¾‹æ›´æ–°**:
```json
// ä¿®æ”¹å‰
{"type": "expense", "amount": 30, "category": "é¤é¥®", "date": "2025-11-26", "description": "åƒé¥­"}

// ä¿®æ”¹å
{"type": "expense", "amount": 30, "category": "Food", "date": "2025-11-26", "description": "åƒé¥­"}
```

**é‡è¦**: ç”¨æˆ·è¾“å…¥çš„ `description` ä»ç„¶å¯ä»¥æ˜¯ä¸­æ–‡ï¼

---

### 3. `/app/api/ocr/route.ts` - OCR å›¾ç‰‡è¯†åˆ«æç¤ºè¯

**ä¿®æ”¹å†…å®¹**:
- Qwen VL æç¤ºè¯æ”¹ä¸ºè‹±æ–‡
- Claude Vision æç¤ºè¯æ”¹ä¸ºè‹±æ–‡
- ç±»åˆ«åˆ—è¡¨æ›´æ–°ä¸ºè‹±æ–‡

**Qwen VL æç¤ºè¯**:
```typescript
// ä¿®æ”¹å‰
æ”¯å‡ºåˆ†ç±»ï¼šé¤é¥®ã€äº¤é€šã€è´­ç‰©ã€å¨±ä¹ã€å…¶ä»–
æ”¶å…¥åˆ†ç±»ï¼šå·¥èµ„ã€è½¬è´¦ã€å…¶ä»–

// ä¿®æ”¹å
Expense categories: Rent & Bills, Food, Shopping, Transport, Entertainment, Investments
Income categories: Salary, Transfer, Other
```

**Claude Vision æç¤ºè¯**:
åŒæ ·çš„ä¿®æ”¹æ¨¡å¼

---

## ğŸ¯ ç”¨æˆ·ä½“éªŒå˜åŒ–

### è¾“å…¥æ–¹å¼ (ä¿æŒä¸å˜)
ç”¨æˆ·ä»ç„¶å¯ä»¥ç”¨ä¸­æ–‡è¾“å…¥ï¼š
```
è¾“å…¥: "ä»Šå¤©åˆé¥­èŠ±äº†50å—"
è¾“å…¥: "paid rent 1200 dollars"
```

### AI è§£æç»“æœ (ç±»åˆ«å˜ä¸ºè‹±æ–‡)
```json
// ä¸­æ–‡è¾“å…¥ â†’ è‹±æ–‡ç±»åˆ«
{
  "type": "expense",
  "amount": 50,
  "category": "Food",          â† è‹±æ–‡ç±»åˆ«
  "date": "2025-11-26",
  "description": "åˆé¥­"         â† æè¿°ä¿æŒåŸè¯­è¨€
}

// è‹±æ–‡è¾“å…¥ â†’ è‹±æ–‡ç±»åˆ«
{
  "type": "expense",
  "amount": 1200,
  "category": "Rent & Bills",   â† è‹±æ–‡ç±»åˆ«
  "date": "2025-11-26",
  "description": "paid rent"    â† æè¿°ä¿æŒåŸè¯­è¨€
}
```

### å‰ç«¯æ˜¾ç¤º (è‹±æ–‡)
äº¤æ˜“åˆ—è¡¨ã€å›¾è¡¨ç­‰æ‰€æœ‰åœ°æ–¹çš„ç±»åˆ«æ˜¾ç¤ºéƒ½ä¼šæ˜¯è‹±æ–‡ï¼š
- Food
- Transport
- Shopping
- Rent & Bills
- Entertainment
- Investments

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯• 1: ä¸­æ–‡è¾“å…¥ â†’ è‹±æ–‡ç±»åˆ«

**è¾“å…¥**:
```
ä»Šå¤©åƒé¥­èŠ±äº†30å—
```

**é¢„æœŸè¾“å‡º**:
```json
{
  "type": "expense",
  "amount": 30,
  "category": "Food",
  "date": "2025-11-26",
  "description": "åƒé¥­"
}
```

---

### æµ‹è¯• 2: æ–°å¢ç±»åˆ« - Rent & Bills

**è¾“å…¥**:
```
ä»˜äº†æˆ¿ç§Ÿ1200
```

**é¢„æœŸè¾“å‡º**:
```json
{
  "type": "expense",
  "amount": 1200,
  "category": "Rent & Bills",
  "date": "2025-11-26",
  "description": "ä»˜æˆ¿ç§Ÿ"
}
```

---

### æµ‹è¯• 3: æ–°å¢ç±»åˆ« - Investments

**è¾“å…¥**:
```
ä¹°äº†500å—çš„åŸºé‡‘
```

**é¢„æœŸè¾“å‡º**:
```json
{
  "type": "expense",
  "amount": 500,
  "category": "Investments",
  "date": "2025-11-26",
  "description": "ä¹°åŸºé‡‘"
}
```

---

### æµ‹è¯• 4: æ”¶å…¥ç±»åˆ«

**è¾“å…¥**:
```
ä»Šå¤©æ”¶åˆ°å·¥èµ„5000å…ƒ
```

**é¢„æœŸè¾“å‡º**:
```json
{
  "type": "income",
  "amount": 5000,
  "category": "Salary",
  "date": "2025-11-26",
  "description": "å·¥èµ„"
}
```

---

### æµ‹è¯• 5: OCR å›¾ç‰‡è¯†åˆ«

**ä¸Šä¼ **: é¤å…å°ç¥¨å›¾ç‰‡ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼‰

**é¢„æœŸè¾“å‡º**:
```json
{
  "type": "expense",
  "amount": 68.5,
  "category": "Food",
  "date": "2025-11-26",
  "description": "åˆé¤"
}
```

---

## ğŸ“Š æ•°æ®å…¼å®¹æ€§

### å·²æœ‰æ•°æ®å¤„ç†

**é—®é¢˜**: ç”¨æˆ·ä¹‹å‰å¯èƒ½æœ‰ä½¿ç”¨ä¸­æ–‡ç±»åˆ«çš„äº¤æ˜“è®°å½•

**å½±å“**:
- localStorage ä¸­çš„æ—§äº¤æ˜“ä»ç„¶ä¿ç•™ä¸­æ–‡ç±»åˆ«ï¼ˆå¦‚ "é¤é¥®"ï¼‰
- æ–°äº¤æ˜“ä¼šä½¿ç”¨è‹±æ–‡ç±»åˆ«ï¼ˆå¦‚ "Food"ï¼‰
- å‰ç«¯æ˜¾ç¤ºæ—¶ä¼šæ··åˆæ˜¾ç¤ºä¸­æ–‡å’Œè‹±æ–‡ç±»åˆ«

**å»ºè®®** (å¯é€‰):
å¦‚æœéœ€è¦ç»Ÿä¸€æ—§æ•°æ®ï¼Œå¯ä»¥åœ¨ç”¨æˆ·é¦–æ¬¡ç™»å½•æ—¶è¿è¡Œä¸€æ¬¡è¿ç§»è„šæœ¬ï¼š
```typescript
function migrateCategoryToEnglish(oldCategory: string): string {
  const map: Record<string, string> = {
    'é¤é¥®': 'Food',
    'äº¤é€š': 'Transport',
    'è´­ç‰©': 'Shopping',
    'å¨±ä¹': 'Entertainment',
    'å…¶ä»–': 'Other',
    'å·¥èµ„': 'Salary',
    'è½¬è´¦': 'Transfer'
  }
  return map[oldCategory] || oldCategory
}

// åœ¨ loadTransactions æ—¶è‡ªåŠ¨è¿ç§»
const transactions = loadTransactions().map(t => ({
  ...t,
  category: migrateCategoryToEnglish(t.category)
}))
```

---

## âœ… éªŒè¯æ¸…å•

- [x] ç±»åˆ«å®šä¹‰å·²æ›´æ–°ä¸ºè‹±æ–‡
- [x] AI æ–‡æœ¬è§£ææç¤ºè¯å·²æ›´æ–°
- [x] OCR å›¾ç‰‡è¯†åˆ«æç¤ºè¯å·²æ›´æ–°
- [x] TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡
- [x] Next.js æ„å»ºæˆåŠŸ
- [x] æ–°å¢ç±»åˆ«ï¼šRent & Bills, Investments
- [x] ä¿ç•™ç”¨æˆ·è¾“å…¥æè¿°çš„åŸè¯­è¨€

---

## ğŸ¨ UI ç¤ºä¾‹

### Dashboard - äº¤æ˜“åˆ—è¡¨
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Recent Transactions                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“… 2025-11-26                           â”‚
â”‚ ğŸŸ¢ Food â€¢ åƒé¥­ ........................ $30  â”‚
â”‚ ğŸ”´ Transport â€¢ æ‰“è½¦ ................... $12  â”‚
â”‚ ğŸŸ¢ Rent & Bills â€¢ ä»˜æˆ¿ç§Ÿ .......... $1,200  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Budgeting - åˆ†ç±»ç»Ÿè®¡
```
Top Categories:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Rent & Bills    $1,200  (48%)
Food              $450  (18%)
Shopping          $300  (12%)
```

---

## ğŸš€ éƒ¨ç½²å»ºè®®

### 1. æ¸…é™¤æµ‹è¯•æ•°æ®ï¼ˆå¯é€‰ï¼‰
å¦‚æœéœ€è¦ä»å¤´å¼€å§‹æµ‹è¯•ï¼š
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ
localStorage.clear()
```

### 2. é‡å¯å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

### 3. æµ‹è¯•æµç¨‹
1. è¿æ¥é’±åŒ…
2. è¾“å…¥æµ‹è¯•äº¤æ˜“ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼‰
3. ç¡®è®¤ AI è§£æç»“æœæ˜¾ç¤ºè‹±æ–‡ç±»åˆ«
4. æ£€æŸ¥äº¤æ˜“åˆ—è¡¨æ˜¾ç¤º

---

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

### TypeScript ç±»å‹å®‰å…¨
```typescript
// ExpenseCategory ç±»å‹è‡ªåŠ¨æ›´æ–°
type ExpenseCategory =
  | 'Rent & Bills'
  | 'Food'
  | 'Shopping'
  | 'Transport'
  | 'Entertainment'
  | 'Investments'

// IncomeCategory ç±»å‹è‡ªåŠ¨æ›´æ–°
type IncomeCategory =
  | 'Salary'
  | 'Transfer'
  | 'Other'

// ä½¿ç”¨æ—¶ä¼šæœ‰ç±»å‹æ£€æŸ¥
const category: ExpenseCategory = 'Food' // âœ… æ­£ç¡®
const category: ExpenseCategory = 'é¤é¥®' // âŒ ç±»å‹é”™è¯¯
```

### AI æ¨¡å‹é€‚é…æ€§
- **Qwen (é€šä¹‰åƒé—®)**: æ”¯æŒä¸­è‹±æ–‡æ··åˆè¾“å…¥ï¼Œèƒ½æ­£ç¡®è¾“å‡ºè‹±æ–‡ç±»åˆ«
- **Claude**: åŒæ ·æ”¯æŒå¤šè¯­è¨€è¾“å…¥ï¼Œè¾“å‡ºæŒ‡å®šæ ¼å¼

**æç¤ºè¯ç­–ç•¥**:
- æ˜ç¡®æŒ‡å®šç±»åˆ«å¿…é¡»æ˜¯è‹±æ–‡
- æä¾›è‹±æ–‡ç±»åˆ«çš„å®Œæ•´åˆ—è¡¨
- ç¤ºä¾‹ä¸­å±•ç¤ºè‹±æ–‡ç±»åˆ«è¾“å‡º
- æè¿°å­—æ®µå…è®¸ä½¿ç”¨ç”¨æˆ·åŸè¯­è¨€

---

## ğŸ¯ æ€»ç»“

**ä¿®æ”¹èŒƒå›´**: 3 ä¸ªæ–‡ä»¶
**ä¿®æ”¹è¡Œæ•°**: ~50 è¡Œ
**å½±å“åŠŸèƒ½**:
- âœ… äº¤æ˜“ç±»åˆ«ç³»ç»ŸåŒ–
- âœ… AI è§£æç»“æœæ ‡å‡†åŒ–
- âœ… å‰ç«¯æ˜¾ç¤ºè‹±æ–‡åŒ–
- âœ… ä¿ç•™ç”¨æˆ·è¾“å…¥è¯­è¨€çµæ´»æ€§

**ä¼˜åŠ¿**:
1. ç±»åˆ«æ ‡å‡†åŒ–ï¼Œä¾¿äºå›½é™…åŒ–
2. æ–°å¢ "Rent & Bills" å’Œ "Investments" æ›´å®ç”¨
3. ç”¨æˆ·è¾“å…¥ä»ç„¶çµæ´»ï¼ˆæ”¯æŒä¸­è‹±æ–‡ï¼‰
4. TypeScript ç±»å‹å®‰å…¨

**å…¼å®¹æ€§**:
- âœ… æ„å»ºæˆåŠŸ
- âœ… ç±»å‹æ£€æŸ¥é€šè¿‡
- âœ… å‘å‰å…¼å®¹ï¼ˆæ—§æ•°æ®ä»å¯è¯»å–ï¼‰

---

**å®Œæˆæ—¶é—´**: 2025-11-26
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶éªŒè¯
